<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8">
  <title>মেইন এডমিন প্যানেল - Income White HQ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
    body{background:#0a0a1a;color:#fff;min-height:100vh}
    .header{background:linear-gradient(135deg,#8b3dff,#00d4ff);padding:20px;text-align:center;font-size:28px;font-weight:bold}
    .container{max-width:1200px;margin:20px auto;padding:20px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px}
    .card{background:#1a1a2e;border-radius:18px;padding:25px;box-shadow:0 12px 35px rgba(139,61,255,0.4);border:2px solid #8b3dff}
    .card h3{font-size:22px;margin-bottom:15px;color:#00d4ff}
    .big-num{font-size:42px;font-weight:bold;color:#8b3dff}
    .tabs{margin:25px 0;display:flex;flex-wrap:wrap;gap:12px}
    .tab-btn{background:#333;padding:16px 28px;border:none;border-radius:12px;color:#fff;cursor:pointer;font-size:17px;transition:0.3s}
    .tab-btn.active{background:#8b3dff;transform:scale(1.05)}
    .tab-content{display:none;padding:30px;background:#1a1a2e;border-radius:18px;margin-top:15px;box-shadow:inset 0 5px 20px rgba(0,0,0,0.5)}
    .tab-content.active{display:block}
    input,select,textarea{width:100%;padding:14px;margin:10px 0;border-radius:10px;border:none;background:#333;color:#fff;font-size:16px}
    button{background:#8b3dff;color:#fff;padding:14px 24px;border:none;border-radius:10px;cursor:pointer;margin:8px;font-weight:bold}
    button:hover{background:#9d52ff;transform:translateY(-3px)}
    .logout-btn{position:fixed;bottom:25px;right:25px;background:#ff4444;padding:18px 30px;border-radius:50px;font-size:18px;font-weight:bold;z-index:999}
    .login-box,.pin-box{text-align:center;padding:50px;background:#111;border-radius:20px;margin:80px auto;max-width:400px;border:3px solid #8b3dff}
    .permission-box{background:#222;padding:18px;border-radius:12px;margin:15px 0}
    .subadmin-card{background:#222;padding:22px;border-radius:15px;margin:15px 0;border-left:6px solid #00d4ff}
    .welcome-admin{font-size:26px;color:#00d4ff;margin:20px 0;text-align:center;font-weight:bold}
  </style>
</head>
<body>

<!-- লগইন বক্স -->
<div class="login-box" id="loginBox">
  <h2 style="color:#8b3dff;margin-bottom:30px">মেইন এডমিন লগইন</h2>
  <input type="text" id="adminUser" placeholder="ইউজারনেম" value="MdEad0"><br>
  <input type="password" id="adminPass" placeholder="পাসওয়ার্ড" value="admin12345"><br>
  <button onclick="adminLogin()" style="width:100%;padding:18px;font-size:20px;margin-top:20px">লগইন করুন</button>
  <p style="margin-top:20px;color:#aaa;font-size:14px">ডিফল্ট: MdEad0 / admin12345</p>
</div>

<!-- পিন বক্স -->
<div class="pin-box" id="pinBox" style="display:none">
  <h2 style="color:#8b3dff">৬ ডিজিট সিকিউরিটি পিন</h2>
  <input type="password" id="adminPin" maxlength="6" placeholder="১১২২৩৩" style="text-align:center;font-size:24px;letter-spacing:10px">
  <button onclick="checkPin()" style="width:100%;padding:18px;font-size:20px;margin-top:20px">প্রবেশ করুন</button>
</div>

<!-- মেইন প্যানেল -->
<div class="container" id="mainPanel" style="display:none">
  <div class="welcome-admin">স্বাগতম, সুপ্রিম এডমিন <b>MdEad0</b></div>
  <div class="header">Income White HQ - মেইন এডমিন প্যানেল</div>

  <div class="grid">
    <div class="card"><h3>মোট ইউজার</h3><div class="big-num" id="totalUsers">0</div></div>
    <div class="card"><h3>প্রিমিয়াম ইউজার</h3><div class="big-num" id="premiumUsers">0</div></div>
    <div class="card"><h3>আজকের নিবন্ধন</h3><div class="big-num" id="todayUsers">0</div></div>
    <div class="card"><h3>সাব-এডমিন</h3><div class="big-num" id="totalSubAdmins">0</div></div>
    <div class="card"><h3>পেন্ডিং টাস্ক</h3><div class="big-num" id="pendingTasks">0</div></div>
    <div class="card"><h3>অ্যাকটিভ নোটিশ</h3><div class="big-num" id="activeNotices">0</div></div>
  </div>

  <div class="tabs">
    <button class="tab-btn active" onclick="openTab('dashboard')">ড্যাশবোর্ড</button>
    <button class="tab-btn" onclick="openTab('subadmin')">সাব-এডমিন ম্যানেজ</button>
    <button class="tab-btn" onclick="openTab('users')">ইউজার ম্যানেজ</button>
    <button class="tab-btn" onclick="openTab('tasks')">টাস্ক অ্যাপ্রুভ</button>
    <button class="tab-btn" onclick="openTab('notice')">নোটিশ কন্ট্রোল</button>
    <button class="tab-btn" onclick="openTab('finance')">ফাইন্যান্স</button>
    <button class="tab-btn" onclick="openTab('logs')">লগ সিস্টেম</button>
  </div>

  <!-- সাব-এডমিন সেকশন -->
  <div id="subadmin" class="tab-content">
    <h2 style="text-align:center;color:#8b3dff;margin-bottom:25px">নতুন সাব-এডমিন তৈরি করুন</h2>
    <input type="text" id="saName" placeholder="নাম লিখুন">
    <input type="text" id="saUsername" placeholder="ইউজারনেম (লগইন)">
    <input type="password" id="saPass" placeholder="পাসওয়ার্ড">

    <div class="permission-box">
      <strong>ক্ষমতা দিন:</strong><br>
      <label><input type="checkbox" id="p_users"> ইউজার দেখা/ব্যান</label><br>
      <label><input type="checkbox" id="p_tasks"> টাস্ক অ্যাপ্রুভ</label><br>
      <label><input type="checkbox" id="p_notice"> নোটিশ পুশ</label><br>
      <label><input type="checkbox" id="p_finance"> ব্যালেন্স এডজাস্ট</label><br>
      <label><input type="checkbox" id="p_logs"> লগ দেখা</label>
    </div>
    <button onclick="createSubAdmin()" style="width:100%;padding:18px;font-size:19px">সাব-এডমিন তৈরি করুন</button>

    <h3 style="margin-top:40px;color:#00d4ff">বর্তমান সাব-এডমিন লিস্ট</h3>
    <div id="subAdminList"></div>
  </div>

  <!-- অন্যান্য ট্যাব -->
  <div id="dashboard" class="tab-content active">
    <h2 style="text-align:center;color:#8b3dff">তুমি এখন পুরো সিস্টেমের মালিক!</h2>
    <p style="text-align:center;font-size:20px;margin-top:20px">সাব-এডমিন তৈরি করো, ইউজার কন্ট্রোল করো — সব তোমার হাতে!</p>
  </div>

  <div id="users" class="tab-content"><h2 style="color:#00d4ff">ইউজার ম্যানেজমেন্ট — শিগগিরই আসছে...</h2></div>
  <div id="tasks" class="tab-content"><h2 style="color:#00d4ff">টাস্ক অ্যাপ্রুভ — শিগগিরই...</h2></div>
  <div id="notice" class="tab-content"><h2 style="color:#00d4ff">নোটিশ পুশ — শিগগিরই...</h2></div>
  <div id="finance" class="tab-content"><h2 style="color:#00d4ff">HQ এডজাস্ট — শিগগিরই...</h2></div>
  <div id="logs" class="tab-content"><h2 style="color:#00d4ff">লগ সিস্টেম — শিগগিরই...</h2></div>

  <a href="index.html" class="logout-btn" onclick="logout()">লগআউট</a>
</div>

<script>
const MAIN_ADMIN = { username: "MdEad0", password: "admin12345" };
const MAIN_PIN = "112233";

function adminLogin(){
  const user = document.getElementById('adminUser').value.trim();
  const pass = document.getElementById('adminPass').value;

  if(user === MAIN_ADMIN.username && pass === MAIN_ADMIN.password){
    document.getElementById('loginBox').style.display = 'none';
    document.getElementById('pinBox').style.display = 'block';
    localStorage.setItem('mainAdminLoggedIn', 'true');
  } else {
    alert("ভুল ইউজারনেম বা পাসওয়ার্ড!");
  }
}

function checkPin(){
  if(document.getElementById('adminPin').value === MAIN_PIN){
    document.getElementById('pinBox').style.display = 'none';
    document.getElementById('mainPanel').style.display = 'block';
    localStorage.setItem('adminLoggedIn','true');
    loadData();
  } else {
    alert("ভুল পিন! আবার চেষ্টা করো।");
  }
}

// অটো লগইন (পরেরবার সরাসরি ঢুকবে)
if(localStorage.getItem('mainAdminLoggedIn') === 'true' && localStorage.getItem('adminLoggedIn') === 'true'){
  document.getElementById('loginBox').style.display = 'none';
  document.getElementById('pinBox').style.display = 'none';
  document.getElementById('mainPanel').style.display = 'block';
  setTimeout(loadData, 400);
}

function loadData(){
  updateStats();
  loadSubAdmins();
}

function updateStats(){
  const users = JSON.parse(localStorage.getItem('allUsers') || '[]');
  const subAdmins = JSON.parse(localStorage.getItem('subAdmins') || '[]');
  
  document.getElementById('totalUsers').innerText = users.length;
  document.getElementById('totalSubAdmins').innerText = subAdmins.length;

  // আজকের নিবন্ধন
  const today = new Date().toISOString().slice(0,10);
  const todayUsers = users.filter(u => u.joinDate?.includes(today)).length;
  document.getElementById('todayUsers').innerText = todayUsers;
}

function createSubAdmin(){
  const name = document.getElementById('saName').value.trim();
  const username = document.getElementById('saUsername').value.trim();
  const pass = document.getElementById('saPass').value;

  if(!name || !username || !pass) return alert("সব ফিল্ড পূরণ করো!");

  const permissions = {
    users: document.getElementById('p_users').checked,
    tasks: document.getElementById('p_tasks').checked,
    notice: document.getElementById('p_notice').checked,
    finance: document.getElementById('p_finance').checked,
    logs: document.getElementById('p_logs').checked
  };

  let subAdmins = JSON.parse(localStorage.getItem('subAdmins') || '[]');
  if(subAdmins.find(s => s.username === username)) return alert("এই ইউজারনেম আগে থেকে আছে!");

  subAdmins.push({
    name, username, password: pass, permissions, 
    created: new Date().toLocaleString('bn-BD')
  });

  localStorage.setItem('subAdmins', JSON.stringify(subAdmins));
  alert("সাব-এডমিন সফলভাবে তৈরি করা হয়েছে!");
  loadSubAdmins();

  // ক্লিয়ার ফর্ম
  document.getElementById('saName').value = '';
  document.getElementById('saUsername').value = '';
  document.getElementById('saPass').value = '';
  document.querySelectorAll('#subadmin input[type=checkbox]').forEach(c => c.checked = false);
}

function loadSubAdmins(){
  const subAdmins = JSON.parse(localStorage.getItem('subAdmins') || '[]');
  document.getElementById('totalSubAdmins').innerText = subAdmins.length;

  let html = '';
  subAdmins.forEach((sa, i) => {
    const permList = Object.keys(sa.permissions)
      .filter(key => sa.permissions[key])
      .join(', ') || 'কোনো ক্ষমতা নেই';

    html += `
      <div class="subadmin-card">
        <strong>\( {sa.name}</strong> <small>(@ \){sa.username})</small><br>
        <small>তৈরি: ${sa.created}</small><br><br>
        <b>ক্ষমতা:</b> ${permList}<br>
        <button onclick="deleteSubAdmin(${i})" style="background:#ff4444;margin-top:12px;padding:10px 20px">ডিলিট করুন</button>
      </div>`;
  });

  document.getElementById('subAdminList').innerHTML = html || '<p style="text-align:center;color:#666">কোনো সাব-এডমিন তৈরি করা হয়নি</p>';
}

function deleteSubAdmin(index){
  if(confirm('নিশ্চিত? এই সাব-এডমিন মুছে ফেলবেন?')){
    let subAdmins = JSON.parse(localStorage.getItem('subAdmins') || '[]');
    subAdmins.splice(index, 1);
    localStorage.setItem('subAdmins', JSON.stringify(subAdmins));
    loadSubAdmins();
  }
}

function openTab(tabName){
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.getElementById(tabName).classList.add('active');
  document.querySelector(`button[onclick="openTab('${tabName}')"]`).classList.add('active');
}

function logout(){
  localStorage.removeItem('mainAdminLoggedIn');
  localStorage.removeItem('adminLoggedIn');
  location.reload();
}
</script>
</body>
</html>