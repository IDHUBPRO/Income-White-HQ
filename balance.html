<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8">
  <title>আমার ব্যালেন্স - Income White HQ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Segoe UI',Arial,sans-serif;color:#fff;min-height:100vh;overflow:hidden;position:relative;background:#0a001f}
    canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;opacity:0.7}
    .menu-btn{position:fixed;top:15px;left:15px;background:#00d4ff;color:#fff;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:32px;cursor:pointer;z-index:9999;box-shadow:0 12px 40px rgba(0,212,255,0.7);backdrop-filter:blur(15px);border:4px solid rgba(255,255,255,0.3)}
    .drawer{position:fixed;top:0;left:-320px;width:300px;height:100%;background:rgba(255,255,255,0.98);border-right:6px solid #00d4ff;transition:0.5s;z-index:9999;padding:90px 20px 30px;overflow-y:auto;box-shadow:10px 0 60px rgba(0,0,0,0.7)}
    .drawer a{display:block;padding:20px 25px;color:#00aaff;font-size:20px;font-weight:900;text-decoration:none;border-bottom:1px solid #eee;border-radius:15px;margin:10px;transition:0.4s}
    .drawer a:hover{background:#00d4ff;color:#fff;transform:translateX(15px)}
    .close-btn{position:absolute;top:18px;right:18px;font-size:45px;cursor:pointer;color:#00d4ff;background:#fff;width:55px;height:55px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 25px rgba(0,0,0,0.4)}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.94);display:none;z-index:9998}
    .header{background:linear-gradient(135deg,#00d4ff,#8b3dff);padding:35px;text-align:center;font-size:36px;font-weight:900;box-shadow:0 15px 50px rgba(0,0,0,0.6)}
    .container{max-width:580px;margin:30px auto;padding:20px}
    .bal-card{
      background:rgba(255,255,255,0.15);backdrop-filter:blur(20px);
      border-radius:28px;padding:32px;margin:25px 0;
      box-shadow:0 20px 60px rgba(0,0,0,0.5);
      border:4px solid transparent;position:relative;overflow:hidden;
      transition:0.4s;transform:translateY(0);
    }
    .bal-card:hover{transform:translateY(-12px);box-shadow:0 30px 80px rgba(0,212,255,0.6)}
    .bal-card::before{
      content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;
      background:linear-gradient(45deg,transparent,rgba(255,255,255,0.15),transparent);
      animation:glow 6s linear infinite;
    }
    @keyframes glow{0%{transform:translateX(-100%) translateY(-100%) rotate(30deg)}100%{transform:translateX(100%) translateY(100%) rotate(30deg)}}
    .label{font-size:20px;opacity:0.9;margin-bottom:12px}
    .amount{font-size:44px;font-weight:900;margin:15px 0;letter-spacing:2px}
    .total-main{background:linear-gradient(135deg,#00aa00,#00ff00)!important;border-color:#00ff00 !important}
    .total-main .amount{font-size:52px;color:#fff;text-shadow:0 5px 20px rgba(0,0,0,0.6)}
    .deposit{background:linear-gradient(135deg,#8b3dff,#00d4ff)!important;border-color:#8b3dff !important}
    .deposit .amount{color:#fff}
  </style>
</head>
<body>

<canvas id="spaceBg"></canvas>

<div class="menu-btn" onclick="openMenu()">Menu</div>
<div class="drawer" id="sideDrawer"><div class="close-btn" onclick="closeMenu()">×</div><div id="drawerLinks"></div></div>
<div class="overlay" onclick="closeMenu()"></div>

<div class="header">আমার ব্যালেন্স</div>

<div class="container">

  <!-- মোট উইথড্র ব্যালেন্স -->
  <div class="bal-card total-main">
    <div class="label">মোট উইথড্র করার যোগ্য ব্যালেন্স</div>
    <div class="amount" id="mainBalance">0</div>
    <small>সব টাস্ক + রেফার বোনাস থেকে</small>
  </div>

  <!-- র‍্যান্ডম টাস্ক -->
  <div class="bal-card">
    <div class="label">র‍্যান্ডম টাস্ক থেকে</div>
    <div class="amount" id="randomBal">0</div>
  </div>

  <!-- রেগুলার টাস্ক -->
  <div class="bal-card">
    <div class="label">রেগুলার টাস্ক থেকে</div>
    <div class="amount" id="regularBal">0</div>
  </div>

  <!-- প্রিমিয়াম টাস্ক -->
  <div class="bal-card">
    <div class="label">প্রিমিয়াম টাস্ক থেকে</div>
    <div class="amount" id="premiumBal">0</div>
  </div>

  <!-- রেফার বোনাস -->
  <div class="bal-card">
    <div class="label">রেফার বোনাস</div>
    <div class="amount" id="referBal">0</div>
  </div>

  <!-- ডিপোজিট ব্যালেন্স -->
  <div class="bal-card deposit">
    <div class="label">ডিপোজিট ব্যালেন্স (প্যাকেজ কেনার জন্য)</div>
    <div class="amount" id="depositBal">0</div>
  </div>

</div>

<script src="config.js"></script>
<script src="functions.js"></script>
<script>
checkLogin();

let currentUser = null;

async function init() {
  currentUser = await getCurrentUser();
  if (!currentUser) return;

  const mainTotal = (currentUser.random_balance || 0) +
                    (currentUser.task_balance || 0) +
                    (currentUser.premium_balance || 0) +
                    (currentUser.refer_balance || 0);

  document.getElementById('mainBalance').innerText = mainTotal.toLocaleString();
  document.getElementById('randomBal').innerText = formatNumber(currentUser.random_balance || 0);
  document.getElementById('regularBal').innerText = formatNumber(currentUser.task_balance || 0);
  document.getElementById('premiumBal').innerText = formatNumber(currentUser.premium_balance || 0);
  document.getElementById('referBal').innerText = formatNumber(currentUser.refer_balance || 0);
  document.getElementById('depositBal').innerText = formatNumber(currentUser.deposit_balance || 0);
}
init();

// মেনু
function openMenu(){document.getElementById('sideDrawer').style.left='0';document.querySelector('.overlay').style.display='block';document.body.style.overflow='hidden';}
function closeMenu(){document.getElementById('sideDrawer').style.left='-320px';document.querySelector('.overlay').style.display='none';document.body.style.overflow='auto';}
document.getElementById('drawerLinks').innerHTML = `
  <a href="dashboard.html">ড্যাশবোর্ড</a>
  <a href="random-tasks.html">Random Tasks</a>
  <a href="regular-tasks.html">রেগুলার টাক্স</a>
  <a href="premium-tasks.html">প্রিমিয়াম টাক্স</a>
  <a href="refer.html">আমার রেফার</a>
  <a href="passbook.html">পাসবুক</a>
  <a href="packages.html">প্যাকেজ কিনুন</a>
  <a href="deposit.html">ডিপোজিট</a>
  <a href="withdraw.html">উইথড্র</a>
  <a href="profile.html">প্রোফাইল</a>
  <a href="#" onclick="logout()" style="color:#c00">লগআউট</a>
`;

// স্পেস ব্যাকগ্রাউন্ড
const canvas = document.getElementById('spaceBg');
const ctx = canvas.getContext('2d');
let w = canvas.width = window.innerWidth;
let h = canvas.height = window.innerHeight;
const stars = [];
for(let i=0;i<1600;i++) stars.push({x:Math.random()*w,y:Math.random()*h,size:Math.random()*3,speed:Math.random()*1.5+0.5});
let nebulaAngle = 0;
const planet = {x:w*0.8,y:h*0.2,radius:120};

function draw(){
  ctx.fillStyle='rgba(0,0,20,0.05)'; ctx.fillRect(0,0,w,h);
  ctx.save(); ctx.translate(w/2,h/2); ctx.rotate(nebulaAngle);
  const g=ctx.createRadialGradient(0,0,0,0,0,900);
  g.addColorStop(0,'rgba(0,212,255,0.5)'); g.addColorStop(0.5,'rgba(0,150,255,0.3)'); g.addColorStop(1,'transparent');
  ctx.fillStyle=g; ctx.fillRect(-1300,-1300,2600,2600); ctx.restore(); nebulaAngle+=0.0007;
  const pg=ctx.createRadialGradient(planet.x,planet.y,planet.radius*0.3,planet.x,planet.y,planet.radius);
  pg.addColorStop(0,'#f0f8ff'); pg.addColorStop(0.7,'#88c'); pg.addColorStop(1,'#226');
  ctx.fillStyle=pg; ctx.beginPath(); ctx.arc(planet.x,planet.y,planet.radius,0,Math.PI*2); ctx.fill();
  ctx.fillStyle='#fff'; stars.forEach(s=>{ctx.beginPath();ctx.arc(s.x,s.y,s.size,0,Math.PI*2);ctx.fill();s.x-=s.speed;if(s.x<0)s.x=w;});
  requestAnimationFrame(draw);
}
draw();
window.addEventListener('resize',()=>{w=canvas.width=window.innerWidth;h=canvas.height=window.innerHeight;});
</script>

</body>
</html>